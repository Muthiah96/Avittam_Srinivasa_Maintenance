<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Avittam Srinivasa Apartment Portal</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="hero">
    <div class="stripe"></div>
    <h1>Avittam Srinivasa Apartment Portal</h1>
  </header>

  <!-- NEW: sub-header (below header) showing Common Area Controller -->
  <div class="subhead">
    <span class="badge-icon" title="Common Area Controller">
      <svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M3 5l9-3 9 3v6c0 5-3.8 9.7-9 11-5.2-1.3-9-6-9-11V5z" fill="currentColor"/>
      </svg>
      <span id="cac-text">Common Area Controller: â€”</span>
    </span>
  </div>

  <!-- Sticky nav -->
  <nav class="topnav" role="navigation" aria-label="Primary">
    <a href="#dashboard">Dashboard</a>
    <a href="#opl">OPL</a>
  </nav>

  <main class="container">
    <!-- Two-column on desktop, single column on mobile -->
    <section id="dashboard" class="panel">
      <h2>Dashboard â€” <span id="dash-month"></span></h2>

      <div class="stat-columns">
        <!-- Left column -->
        <div class="col">
          <!-- Maintenance -->
          <div class="stat-group">
            <h3><span class="emoji" aria-hidden="true">ðŸ”§</span>Maintenance</h3>
            <div class="stat-list">
              <button class="stat-item linklike" id="btn-paid" type="button">
                <span>Paid (Flats)</span>
                <strong id="paid-count">0</strong>
              </button>
              <button class="stat-item linklike" id="btn-pending" type="button">
                <span>Pending (Flats)</span>
                <strong id="pending-count">0</strong>
              </button>
            </div>

            <details class="details">
              <summary>Maintenance details (per flat)</summary>
              <div class="table-wrap">
                <table>
                  <thead>
                    <tr><th>Apt</th><th>Maintenance Amount</th><th>Paid?</th></tr>
                  </thead>
                  <tbody id="apt-table-maint"></tbody>
                </table>
              </div>
            </details>
          </div>

          <!-- Sweeper (renamed from Maid) -->
          <div class="stat-group">
            <h3><span class="emoji" aria-hidden="true">ðŸ§¹</span>Sweeper</h3>
            <div class="stat-list">
              <div class="stat-item">
                <span>Amount (This Month)</span>
                <strong id="maid-amount">â€”</strong>
                <small>Month: <span id="dash-month-maid"></span></small>
              </div>
              <div class="stat-item">
                <span>Leaves</span>
                <strong id="maid-leaves">â€”</strong>
              </div>
              <div class="stat-item">
                <span>Payment</span>
                <strong id="maid-paid">â€”</strong>
              </div>
            </div>
          </div>
        </div>

        <!-- Right column -->
        <div class="col">
          <!-- EB -->
          <div class="stat-group">
            <h3><span class="emoji" aria-hidden="true">âš¡</span>EB</h3>
            <div class="stat-list">
              <div class="stat-item">
                <span>Amount (Common)</span>
                <strong id="eb-amount">â€”</strong>
                <small id="eb-amount-note"></small>
              </div>
              <div class="stat-item">
                <span>Status</span>
                <strong id="eb-paid">â€”</strong>
                <small>Month: <span id="dash-month-eb"></span></small>
              </div>
              <div class="stat-item">
                <span>Next EB Period</span>
                <strong id="eb-next">â€”</strong>
              </div>
            </div>
          </div>

          <!-- Lift (expiry colored) -->
          <div class="stat-group">
            <h3><span class="emoji" aria-hidden="true">ðŸ›—</span>Lift Details</h3>
            <div class="stat-list">
              <div class="stat-item status" id="row-ins">
                <div class="row-main">
                  <span>Insurance</span>
                  <strong id="lift-ins-paid">â€”</strong>
                </div>
                <div class="row-sub">
                  <small>Valid Until</small>
                  <strong id="lift-ins-valid">â€”</strong>
                  <small id="lift-ins-days"></small>
                </div>
              </div>
              <div class="stat-item status" id="row-amc">
                <div class="row-main">
                  <span>AMC</span>
                  <strong id="lift-amc-paid">â€”</strong>
                </div>
                <div class="row-sub">
                  <small>Valid Until</small>
                  <strong id="lift-amc-valid">â€”</strong>
                  <small id="lift-amc-days"></small>
                </div>
              </div>
            </div>
          </div>

          <!-- Balance (opens Sheet) -->
          <div class="stat-group">
            <h3><span class="emoji" aria-hidden="true">ðŸ’°</span>Balance</h3>
            <div class="stat-list">
              <a class="stat-item linklike" id="link-balance" href="https://docs.google.com/spreadsheets/d/1vGhGbTScu8bdkP2xLb31vuPYKfjv_E6aKCqYwGAHcN0/edit" target="_blank" rel="noopener">
                <span>Available (Total âˆ’ Expenses)</span>
                <strong id="bal-available">â€”</strong>
                <small>Total: <span id="bal-total-inline">â€”</span> â€¢ Expenses: <span id="bal-expenses-inline">â€”</span></small>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- OPL -->
    <section class="panel" id="opl">
      <h2>OPL (Open Points)</h2>
      <div class="stat-list two">
        <div class="stat-item"><span>Open Items</span><strong id="opl-open-count">â€”</strong></div>
        <div class="stat-item"><span>Closed Items</span><strong id="opl-closed-count">â€”</strong></div>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr><th>ID</th><th>Title / Issue</th><th>Status</th><th>Apt</th><th>Remarks</th></tr>
          </thead>
          <tbody id="opl-table"></tbody>
        </table>
      </div>
      <div class="right">
        <button id="opl-more" type="button">View full list</button>
      </div>
    </section>
  </main>

  <footer>
    <p>Â© <span id="year"></span> Avittam Srinivasa Apartment Association</p>
  </footer>

  <!-- Modal -->
  <div id="modal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop" id="modal-close"></div>
    <div class="modal-card">
      <button class="modal-x" id="modal-x" aria-label="Close">Ã—</button>
      <h3 id="modal-title">Details</h3>
      <div id="modal-content"><ul id="modal-list"></ul></div>
    </div>
  </div>

  <!-- Your existing JS still works; no changes needed -->
  <script src="script.js?v=26"></script>
</body>
</html>
