<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Avittam Srinivase Apartment Portal</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="hero">
    <div class="stripe"></div>
    <h1>Avittam Srinivase Apartment Portal</h1>
  </header>

  <!-- Compact colored nav -->
  <nav class="topnav">
    <a href="#dashboard">Dashboard</a>
    <a href="#opl">OPL</a>
  </nav>

  <!-- DASHBOARD (compact tile grid) -->
  <section class="container panel" id="dashboard">
    <h2>Dashboard — <span id="dash-month"></span></h2>

    <div class="tile-grid">
      <!-- Maintenance -->
      <button class="card clickable" type="button" id="card-paid">
        <h3>Paid (Flats)</h3>
        <p class="big" id="paid-count">—</p>
        <p class="small muted">Tap to see who paid</p>
      </button>
      <button class="card clickable warn" type="button" id="card-pending">
        <h3>Pending (Flats)</h3>
        <p class="big" id="pending-count">—</p>
        <p class="small muted">Tap to see who’s due</p>
      </button>

      <!-- EB -->
      <div class="card">
        <h3>EB Amount (Common)</h3>
        <p class="big" id="eb-amount">—</p>
        <p class="small muted" id="eb-amount-note"></p>
      </div>
      <div class="card">
        <h3>EB Status</h3>
        <p class="big" id="eb-paid">—</p>
        <p class="small muted">Month: <span id="dash-month-eb"></span></p>
      </div>
      <div class="card" id="eb-periods-card">
        <h3>Next EB Periods</h3>
        <ul id="eb-periods" class="list"></ul>
      </div>

      <!-- Common Area Controller (from OPL.Apt) -->
      <div class="card">
        <h3>Common Area Controller</h3>
        <p class="big" id="cac-value">—</p>
        <p class="small muted">From OPL (Apt)</p>
      </div>

      <!-- Maid -->
      <div class="card">
        <h3>Maid Amount (This Month)</h3>
        <p class="big" id="maid-amount">—</p>
        <p class="small muted">Month: <span id="dash-month-maid"></span></p>
      </div>
      <div class="card">
        <h3>Maid Status</h3>
        <p class="small muted">Leaves</p>
        <p class="big" id="maid-leaves">—</p>
        <p class="small muted">Payment</p>
        <p class="big" id="maid-paid">—</p>
      </div>

      <!-- Lift Details (expiry color-coded borders) -->
      <div class="card tile-status" id="lift-ins-card">
        <h3>Lift Insurance</h3>
        <p class="small muted">Paid</p>
        <p class="big" id="lift-ins-paid">—</p>
        <p class="small muted">Valid Until</p>
        <p class="big" id="lift-ins-valid">—</p>
        <p class="small" id="lift-ins-days"></p>
      </div>
      <div class="card tile-status" id="lift-amc-card">
        <h3>Lift AMC</h3>
        <p class="small muted">Paid</p>
        <p class="big" id="lift-amc-paid">—</p>
        <p class="small muted">Valid Until</p>
        <p class="big" id="lift-amc-valid">—</p>
        <p class="small" id="lift-amc-days"></p>
      </div>

      <!-- Balance & Expenses -->
      <button class="card accent clickable" type="button" id="card-balance">
        <h3>Available Balance</h3>
        <p class="big" id="bal-available">—</p>
        <p class="small muted">Tap to view transactions</p>
      </button>
      <div class="card">
        <h3>Total Balance (Σ)</h3>
        <p class="big" id="bal-total">—</p>
      </div>
      <div class="card">
        <h3>Total Expenses (Σ)</h3>
        <p class="big" id="bal-expenses">—</p>
      </div>
    </div>

    <!-- Maintenance details (collapsible to keep page short) -->
    <details class="details">
      <summary>Maintenance details (per flat)</summary>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Apt</th>
              <th>Maintenance Amount</th>
              <th>Paid?</th>
            </tr>
          </thead>
          <tbody id="apt-table-maint"></tbody>
        </table>
      </div>
    </details>
  </section>

  <!-- OPL (compact) -->
  <section class="container panel" id="opl">
    <h2>OPL (Open Points)</h2>
    <div class="tile-grid small">
      <div class="card">
        <h3>Open Items</h3>
        <p class="big" id="opl-open-count">—</p>
      </div>
      <div class="card">
        <h3>Closed Items</h3>
        <p class="big" id="opl-closed-count">—</p>
      </div>
    </div>

    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Title / Issue</th>
            <th>Status</th>
            <th>Apt</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody id="opl-table"></tbody>
      </table>
    </div>
    <div class="right">
      <button id="opl-more" type="button">View full list</button>
    </div>
  </section>

  <footer>
    <p>© <span id="year"></span> Avittam Srinivase Apartment Association</p>
  </footer>

  <!-- Modal (lists & tables) -->
  <div id="modal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop" id="modal-close"></div>
    <div class="modal-card">
      <button class="modal-x" id="modal-x" aria-label="Close">×</button>
      <h3 id="modal-title">Details</h3>
      <div id="modal-content">
        <ul id="modal-list"></ul>
      </div>
    </div>
  </div>

  <script src="script.js?v=20"></script>
</body>
</html>
